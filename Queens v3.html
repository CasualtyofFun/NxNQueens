<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js">
</script>

<style>
table, td
{
border: 2px solid black;
background-color: purple;
}
td
{
width:  40px;
height: 40px;
}

#t2{
background-color:  red;
}

body{
background-color: brown;
}

textarea{
width: 380px;
height: 100px;
resize: false;
}
</style>

<body>
<textarea id = "diag"></textarea>

<dir id = table align = center background =;>
	<h1> 8x8 Queens </h1>
	<table id = chess align = center>
	<tr>  </tr> 
		<td id="t2" data-col = "1" data-row = "1"> </td> 
		<td data-col = "2" data-row = "1"> </td> 
		<td id="t2" data-col = "3" data-row = "1"> </td> 
		<td data-col = "4" data-row = "1"> </td> 
		<td id="t2" data-col = "5" data-row = "1"> </td> 
		<td data-col = "6" data-row = "1"> </td> 
		<td id="t2" data-col = "7" data-row = "1"> </td>
		<td data-col = "8" data-row = "1"> </td>
	<tr>  </tr>
		<td data-col = "1" data-row = "2"> </td>
		<td id="t2" data-col = "2" data-row = "2"> </td> 
		<td data-col = "3" data-row = "2" </td> 
		<td id="t2" data-col = "4" data-row = "2"> </td> 
		<td data-col = "5" data-row = "2"> </td> 
		<td id="t2" data-col = "6" data-row = "2"> </td> 
		<td data-col = "7" data-row = "2"> </td>
		<td id="t2" data-col = "8" data-row = "2"> </td>
	<tr>  </tr> 
		<td id="t2" data-col = "1" data-row = "3"> </td> 
		<td data-col = "2" data-row = "3"> </td> 
		<td id="t2" data-col = "3" data-row = "3"> </td> 
		<td data-col = "4" data-row = "3"> </td> 
		<td id="t2" data-col = "5" data-row = "3"> </td> 
		<td data-col = "6" data-row = "3"> </td> 
		<td id="t2" data-col = "7" data-row = "3"> </td>
		<td data-col = "8" data-row = "3"> </td>
	<tr>  </tr>
		<td data-col = "1" data-row = "4"> </td>
		<td id="t2" data-col = "2" data-row = "4"> </td> 
		<td data-col = "3" data-row = "4"> </td> 
		<td id="t2" data-col = "4" data-row = "4"> </td> 
		<td data-col = "5" data-row = "4"> </td> 
		<td id="t2" data-col = "6" data-row = "4"> </td> 
		<td data-col = "7" data-row = "4"> </td>
		<td id="t2" data-col = "8" data-row = "4"> </td>
	<tr>  </tr> 
		<td id="t2" data-col = "1" data-row = "5"> </td> 
		<td data-col = "2" data-row = "5"> </td> 
		<td id="t2" data-col = "3" data-row = "5"> </td> 
		<td data-col = "4" data-row = "5"> </td> 
		<td id="t2" data-col = "5" data-row = "5"> </td> 
		<td data-col = "6" data-row = "5"> </td> 
		<td id="t2" data-col = "7" data-row = "5"> </td>
		<td data-col = "8" data-row = "5"> </td>
	<tr>  </tr>
		<td data-col = "1" data-row = "6"> </td>
		<td id="t2" data-col = "2" data-row = "6"> </td> 
		<td data-col = "3" data-row = "6"> </td> 
		<td id="t2" data-col = "4" data-row = "6"> </td> 
		<td data-col = "5" data-row = "6"> </td> 
		<td id="t2" data-col = "6" data-row = "6"> </td> 
		<td data-col = "7" data-row = "6"> </td>
		<td id="t2" data-col = "8" data-row = "6"> </td>
	<tr>  </tr> 
		<td id="t2" data-col = "1" data-row = "7"> </td> 
		<td data-col = "2" data-row = "7"> </td> 
		<td id="t2" data-col = "3" data-row = "7"> </td> 
		<td data-col = "4" data-row = "7" > </td> 
		<td id="t2" data-col = "5" data-row = "7"> </td> 
		<td data-col = "6" data-row = "7"> </td> 
		<td id="t2" data-col = "7" data-row = "7"> </td>
		<td data-col = "8" data-row = "7"> </td>
	<tr>  </tr>
		<td data-col = "1" data-row = "8"> </td>
		<td id="t2" data-col = "2" data-row = "8"> </td> 
		<td data-col = "3" data-row = "8"> </td> 
		<td id="t2" data-col = "4" data-row = "8"> </td> 
		<td data-col = "5" data-row = "8"> </td> 
		<td id="t2" data-col = "6" data-row = "8"> </td> 
		<td data-col = "7" data-row = "8"> </td>
		<td id="t2" data-col = "8" data-row = "8"> </td>

	</table>
	
	<img id="drag1" src="WhiteQueenImg.jpg" draggable="true" ondragstart="drag(event)" width = "30"; height = "30" title ="Drag Me"><br>
	<button type = button onclick = "initBoard()"> Reset Board </button><br>
	
</dir>

<script>
//INITIALIZE
var board = [0,0,0,0,0,0,0,0,0];

initBoard();
//END INITIALIZE

//ONCLICK FUNCTION
$( "td" ).click(function() {	
	
	var col = $(this).attr("data-col");
	var row = $(this).attr("data-row");
	
   if($(this).html() === "-"){
 
		if(checkMove(row,col)){
		board[row] = col;
 
			if( this.id == "t2"){
			$(this).html("<img src = \"RedQueenImg.jpg\"></img>");
			}
	
			else{
			$(this).html("<img src = \"PurpleQueenImg.jpg\"></img>");
			}
			
			if(checkComplete()){
			alert("Solution Found!");
			}
	    }	
	
		else{
		$("#diag").append("Illegal Move At " + row + ", " + col + "\n");
		}
	}
   
	else{
	board[row] = 0;
	$(this).html("-");
	}
	
	$("#diag").append(board + "\n");
	});
//END ONCLICK

function checkComplete(){
	for( var i = 1; i < board.length; i++){
		if(board[i] == 0) return false;
	}
	return true;
}


//MOVE CHECK
function checkMove(row, col){
	if(checkVert(col) && checkHoriz(row) && checkDiag(row,col)) return true;
	else return false;
}

function checkHoriz(row){

if(board[row] != 0){
	alert("Horizontal Violation");
 return false;
 }
else return true;
}

function checkVert(col){

for(var i=1; i<board.length; i++){

if (board[i] == col){
   alert("Vertical Violation");
return false;
}

}
return true;
}

function checkDiag(row,col){
	
	for(var i = 1; i < board.length; i++){
		var deltaRow = Math.abs(row - i);
		var deltaCol = Math.abs(col - board[i]);
			
			if( board[i] != 0 && deltaRow == deltaCol ){
			alert("Diagonal Violation");
			return false;
			}
	}
	
	return true;
}
//END MOVE CHECK

function initBoard(){
board = [0,0,0,0,0,0,0,0,0];
$("td").html("-");
$( "td" ).attr("ondrop", "drop(event)");	
$( "td" ).attr("ondragover", "allowDrop(event)");
}


//DRAG AND DROP
function allowDrop(ev)
{
ev.preventDefault();
}

function drag(ev)
{
ev.dataTransfer.setData("Text","ev.target.id");
}

function drop(ev)
{
ev.preventDefault();

var col = $(ev.target).attr("data-col");
var row = $(ev.target).attr("data-row");
	
   if($(ev.target).html() === "-"){
 
		if(checkMove(row,col)){
		board[row] = col;
 
			if( ev.target.id == "t2"){
			$(ev.target).html("<img src = \"RedQueenImg.jpg\"></img>");
			}
	
			else{
			$(ev.target).html("<img src = \"PurpleQueenImg.jpg\"></img>");
			}
			
		
			if(checkComplete()){
			alert("Solution Found! " + board);
			}
	    }	
	
		else{
		//alert("Illegal Move At " + row + ", " + col);
		}
	}	

}
//END DRAG AND DROP
</script>
</body>